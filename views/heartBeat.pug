extends layout

block content
    div(class='container refresh')
        button.button(onclick="refreshPage()")
            span.text Refresh

    ul
        each item in devices
            - var knownData = "null"
            if item.status === "Configured"
                div(class='cartoon-container')
                    p
                        b(style="font-size: 18px;") #{item.name}
                            button.button(onclick=`redirectTo('/update?topic=${item.topic}')`)
                                span.text Reconfigure

                    div(class='cartoon-container left')
                        div(class='container-wrapper')
                            div(class='container-left')
                                div(id='list-container-left', class='list-element')
                                    each data in sensorData
                                        if item.name === data.device_name
                                            if data.data_name === knownData
                                                ul
                                                    li
                                                        | #{data.data_name}:
                                                        br
                                                        | #{data.reading}
                                            else if knownData === "null"
                                                - knownData = data.data_name
                                                ul
                                                    li
                                                        | #{data.data_name}:
                                                        br
                                                        | #{data.reading}
                            div(class='container-right')
                                div(id='list-container-right', class='list-element')
                                    each data in sensorData
                                        if item.name === data.device_name
                                            if data.data_name !== knownData
                                                ul
                                                    li
                                                        | #{data.data_name}:
                                                        br
                                                        | #{data.reading}

    script.
        function refreshPage() {
            location.reload(); // Reload the page
        }

        function redirectTo(url) {
            window.location.href = url;
        }
